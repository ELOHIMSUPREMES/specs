Provides: mojo-maven2-plugin-cobertura = 18
Obsoletes: mojo-maven2-plugin-cobertura < 18
Name: maven-plugin-cobertura
Version: 2.5.1
Summary: Plugin providing the features of Cobertura within Maven
License: ASL 2.0 and GPLv2 and GPLv2+
Url: http://mojo.codehaus.org/cobertura-maven-plugin/
Packager: Igor Vlasenko <viy@altlinux.ru>
Requires: /bin/sh
Requires: /bin/sh
Requires: cobertura
Requires: jpackage-utils
Requires: jpackage-utils
Requires: maven
Requires: mojo-parent

BuildArch: noarch
Group: Development/Java
Release: alt0.3jpp
Source: maven-plugin-cobertura-2.5.1-1.fc16.cpio

%description
This plugin provides the features of Cobertura within the Maven 2 environment.
The report generated by this plugin is the result of executing the Cobertura
tool against your compiled classes to help you determine how well the unit
testing efforts have been, and can then be used to identify which parts
of your Java program are lacking test coverage.

# sometimes commpress gets crazy (see maven-scm-javadoc for details)
%set_compress_method none
%prep
cpio -idmu --quiet --no-absolute-filenames < %{SOURCE0}

%build
cpio --list < %{SOURCE0} | sed -e 's,^\.,,' > %name-list

%install
mkdir -p $RPM_BUILD_ROOT
for i in usr var etc; do
[ -d $i ] && mv $i $RPM_BUILD_ROOT/
done

# hack to override mojo-maven2-plugins
pushd %buildroot/etc/maven/fragments
mv %name zz-%name
popd
sed -i -e s,/etc/maven/fragments/,/etc/maven/fragments/zz-, %name-list

%files -f %name-list

%changelog
* Tue Mar 20 2012 Igor Vlasenko <viy@altlinux.ru> 2.5.1-alt0.3jpp
- added Obsoletes on mojo-maven2-plugin-cobertura

* Mon Mar 19 2012 Igor Vlasenko <viy@altlinux.ru> 2.5.1-alt0.2jpp
- zz-* hack to override mojo-maven2-plugins

* Tue Mar 13 2012 Igor Vlasenko <viy@altlinux.ru> 2.5.1-alt0.1jpp
- bootstrap pack of jars created with jppbootstrap script
- temporary package to satisfy circular dependencies

