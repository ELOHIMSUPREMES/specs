# NOTE: Please do not edit this file, it was auto generated by jhconvert
#       See http://wiki.sugarlabs.org/go/Deployment_Team/jhconvert for details

Name: sugar
Version: 0.88.0
Release: alt1.1
Summary: Sugar window manager
License: GPL/LGPL
Group: Graphical desktop/Sugar
Url: http://sugarlabs.org/
Packager: Sugar Development Team <sugar@packages.altlinux.org>


Source: http://download.sugarlabs.org/sources/sucrose/glucose/sugar/sugar-0.88.0.tar.bz2

Patch: sugar-0.88.0-sugar-start-script.patch
Patch1: sugar-0.88.0-1544.patch
Patch2: sugar-0.88.0-sugar-1747.patch

Requires: sugar-artwork >= 0.88.0
Requires: dbus  
Requires: dbus-tools-gui  
Requires: libGConf  
Requires: gst-plugins-base  
Requires: python-module-gst  
Requires: libgtk+2  
Requires: gvfs  
Requires: hal  
Requires: python-module-pygnome-desktop  
Requires: metacity-gnome >= 2.27.1
Requires: python-module-numpy  
Requires: openssh  
Requires: python-module-pygtk  
Requires: python-module-pygtksourceview  
Requires: python  
Requires: python-module-xklavier  
Requires: python-module-simplejson  
Requires: sugar-base >= 0.88.0
Requires: sugar-toolkit >= 0.88.0
Requires: xdpyinfo  
Requires: xsetroot  

BuildPreReq: perl-XML-Parser  
BuildPreReq: autoconf  
BuildPreReq: automake  
BuildPreReq: libGConf-devel  
BuildPreReq: gettext  
BuildPreReq: libgtk+2-devel  
BuildPreReq: intltool >= 0.33
BuildPreReq: libtool  
BuildPreReq: python-module-pygtk-devel  
BuildPreReq: python-devel  
BuildPreReq: sugar-base >= 0.88.0

%description
This package contains the base modules for Sugar.
Sugar is a graphical user interface aimed at children which promotes sharing
and collaborative learning. It was introduced on the One Laptop Per Child
(OLPC) XO laptop but is useful on other devices as well.

%package emulator
Summary: The emulator for the Sugar Desktop Environment
Group: Graphical desktop/Sugar
Requires: %{name} = %{version}-%{release}
Requires: xorg-xephyr
%description emulator
This package contains the Sugar emulator. It is using Xephyr
to run a Sugar environment similar to what is on the XO laptop. 

%prep
%setup -v -n sugar-0.88.0
%patch -p1
%patch1 -p1
%patch2 -p1

%build
mkdir -p m4
intltoolize -f -c
autoreconf
%define __libtoolize true
%configure am_cv_python_pythondir=%{python_sitelibdir} am_cv_python_pyexecdir=%{python_sitelibdir}
make

%install
export GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1
make DESTDIR=%{buildroot} install
export GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=
%find_lang sugar

install -d -m 0755 %{buildroot}/%{_sysconfdir}/X11/wmsession.d/
cat <<__EOF__ > %{buildroot}/%{_sysconfdir}/X11/wmsession.d/08sugar
NAME=Sugar
ICON=%{_datadir}/sugar/data/icons/module-about_me.svg
DESC=Sugar window manager
EXEC=%{_bindir}/sugar
SCRIPT:
exec %{_bindir}/sugar
__EOF__

%files -f sugar.lang
%defattr(-,root,root,-)
%config %{_sysconfdir}/dbus*/system.d/*
%config %{_sysconfdir}/gconf/schemas/*
%{_bindir}/*
%exclude %{_bindir}/sugar-emulator
%{python_sitelibdir}/jarabe
%{_datadir}/sugar
%{_datadir}/mime/packages/*
%{_datadir}/xsessions/sugar.desktop
%{_datadir}/icons/hicolor/scalable/apps/sugar-xo.svg
%doc AUTHORS COPYING README
%config %{_sysconfdir}/X11/wmsession.d/*

%files emulator
%{_bindir}/sugar-emulator
%{_datadir}/applications/sugar-emulator.desktop

%post
%gconf2_install %name

%preun
%gconf2_uninstall %name

%changelog
* Fri Oct 28 2011 Vitaly Kuznetsov <vitty@altlinux.ru> 0.88.0-alt1.1
- Rebuild with Python-2.7

* Tue Apr 06 2010 Aleksey Lim <alsroot@altlinux.org> 0.88.0-alt1
- Sucrose 0.88.0 release

* Thu Dec 03 2009 Eugeny A. Rostovtsev (REAL) <real at altlinux.org> 0.84.5-alt1.1
- Rebuilt with python 2.6

* Tue Apr 28 2009 Aleksey Lim <alsroot@altlinux.org> 0.84.5-alt1
- update Sucrose to 0.84.2 version

* Wed Mar 18 2009 Aleksey Lim <alsroot@altlinux.org> 0.84.0-alt1
- update Sucrose to 0.84.0 version

* Sun Feb 15 2009 Aleksey Lim <alsroot@altlinux.org> 0.83.7-alt1
- new Sucrose 0.83.5 release

* Wed Jan 21 2009 Aleksey Lim <alsroot@altlinux.org> 0.83.5-alt2
- update gconf schemas

* Tue Jan 20 2009 Aleksey Lim <alsroot@altlinux.org> 0.83.5-alt1
- new Sucrose 0.83.4 release

* Tue Dec 23 2008 Aleksey Lim <alsroot@altlinux.org> 0.83.4-alt1
- new upstream release

* Tue Dec 16 2008 Aleksey Lim <alsroot@altlinux.org> 0.83.3-alt2
- altlinux #18214 fix
- setup TZ before sugar startup
- use sugar-72 theme by default
- use python-module-pygtk package instead of pygtk2
- sugar #81 fix
- hide OLPC register button
- olpc #8141 fix

* Sat Dec 13 2008 Aleksey Lim <alsroot@altlinux.org> 0.83.3-alt1
- Sugar 0.84 release cycle

* Sun Nov 23 2008 Aleksey Lim <alsroot@altlinux.org> 0.82.2-alt2
- change group tag to "Graphical desktop/Sugar"
- make all links to child packages hard

* Tue Nov 18 2008 Aleksey Lim <alsroot@altlinux.org> 0.82.2-alt1
- first build for ALT Linux Sisyphus
